<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Strava Activity Histogram</title>

    <!-- Chart.js v3+ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        background: #1a181f;
        color: #f5f5f5;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
      }

      .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        padding: 24px;
        box-sizing: border-box;
      }

      h1 {
        margin-bottom: 16px;
        font-size: 24px;
        font-weight: 600;
      }

      #workoutChart {
        max-width: 900px;
        width: 100%;
        max-height: 450px;
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <h1>Strava Activity Histogram</h1>
      <canvas id="workoutChart" height="120"></canvas>
    </div>

    <script>
      // ðŸ‘‰ Hard-coded sample from your Strava JSON (you can add more objects)
      const activities = [
        {
          name: "Morning Ride",
          elapsed_time: 1217,
          start_date: "2025-11-20T16:00:53Z"
        },
        {
          name: "Afternoon Ride",
          elapsed_time: 1800,
          start_date: "2025-11-21T16:00:53Z"
        },
        {
          name: "Evening Run",
          elapsed_time: 950,
          start_date: "2025-11-22T16:00:53Z"
        }
      ];

      function buildChart() {
        const sorted = activities
          .slice()
          .sort(
            (a, b) => new Date(a.start_date) - new Date(b.start_date)
          );

        const labels = sorted.map((item) =>
          new Date(item.start_date).toISOString().slice(0, 10)
        );

        const data = sorted.map((item) =>
          item.elapsed_time
            ? Math.round((item.elapsed_time / 60) * 10) / 10
            : 0
        );

        const ctx = document.getElementById("workoutChart").getContext("2d");

        new Chart(ctx, {
          type: "bar",
          data: {
            labels,
            datasets: [
              {
                label: "Elapsed Time (minutes)",
                data,
                backgroundColor: "rgba(54, 162, 235, 0.5)",
                borderColor: "rgba(54, 162, 235, 1)",
                borderWidth: 1
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: { display: true },
              title: {
                display: true,
                text: "Workout Activities: Elapsed Time by Date"
              }
            },
            scales: {
              x: {
                title: {
                  display: true,
                  text: "Date"
                }
              },
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: "Elapsed Time (minutes)"
                }
              }
            }
          }
        });
      }

      window.addEventListener("DOMContentLoaded", buildChart);
    </script>
  </body>
</html>
